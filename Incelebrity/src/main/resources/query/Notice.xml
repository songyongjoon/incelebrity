<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.client.notice.dao.NoticeDAO">


    <!-- 게시판 리스트 검색 부분 추가 -->
    <select id="noticeList" parameterType="notice" resultType="notice">
        SELECT notice_no, notice_title, notice_name, to_char(notice_writeday, 'YYYY-MM-DD')
        as notice_writeday, notice_readcnt
        FROM notice
        <where>
            <if test="search=='notice_title'">
                <![CDATA[notice_title LIKE '%'|| #{keyword} || '%']]>
            </if>
            <if test="search=='notice_content'">
                <![CDATA[notice_content LIKE '%'|| #{keyword} ||'%']]>
            </if>
            <if test="search=='notice_name'">
                <![CDATA[notice_name LIKE '%'|| #{keyword}||'%']]>
            </if>
        </where>
        ORDER BY notice_no desc
    </select>

    <!-- 게시물 등록1
    <insert id="boardInsert" parameterType="board">
       INSERT INTO spring_board(b_num, b_name, b_title, b_content, b_pwd)
       VALUES(spring_board_seq.nextval, #{b_name}, #{b_title}, #{b_content}, #{b_pwd}
    </insert>
    -->

    <!-- 게시물 등록2
    <insert id="noticeInsert" parameterType="notice">
       /* Board - noticeInsert */
       <selectKey keyProperty="notice_no" resultType="int" order="BEFORE">
          SELECT notice_seq.nextval from dual
       </selectKey>

       INSERT INTO notice(notice_no, notice_name, notice_title, notice_content)
       VALUES(#{notice_no}, #{notice_name}, #{notice_title}, #{notice_content})
    </insert>-->

    <select id="noticeDetail" parameterType="notice" resultType="notice">
       /* Board - noticeDetail */
       SELECT notice_no, notice_name, notice_title, notice_content, TO_CHAR(notice_writeday, 'YYYY-MM-DD HH24:MI:SS') AS notice_writeday
       FROM notice
       WHERE notice_no = #{notice_no}
    </select>


    <!-- 게시물 삭제
    <delete id="noticeDelete" parameterType="board">
       /* Board - noticeDelete */
       DELETE FROM notice
       WHERE notice_no = #{notice_no}
    </delete>-->
</mapper>